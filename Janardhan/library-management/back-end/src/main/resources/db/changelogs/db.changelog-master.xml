<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd
    http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">


	<changeSet id="1" author="ravadaj">
		<createTable tableName="AUTHOR">
			<column name="ID" type="BIGINT" autoIncrement="true">
				<constraints nullable="false" primaryKey="true" />
			</column>
			<column name="NAME" type="varchar2(255)">
				<constraints nullable="false" />
			</column>
			<column name="EMAIL_ADDRESS" type="varchar2(255)">
				<constraints nullable="false" unique="true" />
			</column>
		</createTable>

		<createTable tableName="PUBLISHER">
			<column name="ID" type="BIGINT" autoIncrement="true">
				<constraints nullable="false" primaryKey="true" />
			</column>
			<column name="NAME" type="varchar2(255)">
				<constraints nullable="false" />
			</column>
		</createTable>

		<createTable tableName="BOOK">
			<column name="ID" type="BIGINT" autoIncrement="true">
				<constraints nullable="false" primaryKey="true" />
			</column>
			<column name="TITLE" type="varchar2(255)" />
			<column name="ISBN_NUMBER" type="varchar2(255)">
				<constraints unique="true" />
			</column>
			<column name="TOTAL_STOCK" type="BIGINT" />
			<column name="AVAILABLE_STOCK" type="BIGINT" />
			<column name="PRICE" type="NUMBER(5,2)" />
			<column name="PUBLISHER_ID" type="BIGINT" />
		</createTable>

		<addForeignKeyConstraint constraintName="BOOK_PUBLISHER_FK"
			referencedTableName="PUBLISHER" baseColumnNames="PUBLISHER_ID"
			baseTableName="BOOK" referencedColumnNames="ID" />

		<createTable tableName="BOOK_AUTHOR">
			<column name="BOOK_ID" type="BIGINT" />
			<column name="AUTHOR_ID" type="BIGINT" />
		</createTable>

		<addForeignKeyConstraint constraintName="FK_BOOK_AUTHOR_BOOK"
			referencedTableName="BOOK" baseColumnNames="BOOK_ID" baseTableName="BOOK_AUTHOR"
			referencedColumnNames="ID" />

		<addForeignKeyConstraint constraintName="FK_BOOK_AUTHOR_AUTHOR"
			referencedTableName="AUTHOR" baseColumnNames="AUTHOR_ID"
			baseTableName="BOOK_AUTHOR" referencedColumnNames="ID" />

		<!-- <createSequence sequenceName="hibernate_sequence" startValue="1000" 
			incrementBy="1" /> -->

	</changeSet>

</databaseChangeLog>